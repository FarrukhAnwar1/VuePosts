import{d as M,u as _,T as I,_ as S,o as r,c as a,a as s,t as p,F as y,r as P,n as B,b as h,p as T,e as E,s as O,f as V,g as b,w as U,v as w,h as G,i as F,j as v,k as g,l as K,m as k,q as A,x as R,y as j,z as J,A as L,B as D,C as X,D as C,E as z}from"./index-ee57cedc.js";import{p as H}from"./purify.es-0c4a0514.js";const Y=M({data(){return{mainStore:_()}},props:{post:{type:Object,required:!0},postDocumentId:{type:String,required:!0},showHomeButton:{type:Boolean,required:!0}},methods:{deletePost(e){this.$emit("deletePost",e)},tagClicked(e){this.$emit("tagClicked",e)},authorUsernameClicked(e){this.$emit("authorUsernameClicked",e)},postLiked(e){this.$emit("postLiked",e)},postUnliked(e){this.$emit("postUnliked",e)},handleCommentButtonClick(e){this.$router.push({name:"singlePost",params:{documentId:e}})},handleHomeButtonClick(){this.$router.push({name:"posts"})},splitContent(e){return e.split(/( +|\t+|\r?\n+|#\w+)/).filter(Boolean)},wordIsTag(e){return e.startsWith("#")},wordIsMention(e){return e.startsWith("@")},getFormattedDate(e){try{return new I(e.seconds,e.nanoseconds).toDate().toLocaleString(void 0,{dateStyle:"long",timeStyle:"short"})}catch{return""}}},computed:{getLikeDocumentIdFromUid(){var e;for(const[t,n]of this.post.likes)if(n.likerUid===((e=this.mainStore.user)==null?void 0:e.uid))return t;return""}},emits:["deletePost","tagClicked","authorUsernameClicked","postLiked","postUnliked"]});const Z={class:"post"},x={class:"d-flex justify-content-between"},ee={class:"text-center text-white-50"},te=["onClick"],se={class:"container-fluid text-center"},ne={class:"row"},oe={class:"col-xs-12 col-md-4"},ie={class:"d-flex justify-content-center align-items-center"},re={key:0},ae={class:"d-inline-block ms-2 pt-2"},de={class:"col-xs-12 col-md-4 mt-2 mt-md-0"},le={key:0,class:"d-flex justify-content-center align-items-center"},ue={class:"d-inline-block ms-2 pt-2"},me={class:"col-xs-12 col-md-4 mt-2 mt-md-0"};function ce(e,t,n,o,l,i){var d,u;return r(),a("div",Z,[s("div",x,[s("h1",{class:"author-display-name text-center text-break",onClick:t[0]||(t[0]=c=>e.authorUsernameClicked(e.post.authorUsername))},p((d=e.post)==null?void 0:d.authorUsername),1),s("h4",ee,p(e.getFormattedDate(e.post.createdAt)),1)]),s("h3",null,[(r(!0),a(y,null,P(e.splitContent(e.post.content),c=>(r(),a("span",{class:B({tag:e.wordIsTag(c),mention:e.wordIsMention(c)}),onClick:$=>e.tagClicked(c.slice(1))},p(c),11,te))),256))]),s("div",se,[s("div",ne,[s("div",oe,[s("div",ie,[e.mainStore.user!=null?(r(),a("span",re,[e.getLikeDocumentIdFromUid.length>0?(r(),a("button",{key:1,type:"button",class:"btn btn-warning d-inline large-button-text",onClick:t[2]||(t[2]=c=>e.postUnliked(e.getLikeDocumentIdFromUid))},"Unlike")):(r(),a("button",{key:0,type:"button",class:"btn btn-success d-inline large-button-text",onClick:t[1]||(t[1]=c=>e.postLiked(e.postDocumentId))},"Like"))])):h("",!0),s("h5",ae,"Likes: "+p(e.post.likes.size),1)])]),s("div",de,[e.showHomeButton?(r(),a("button",{key:1,type:"button",class:"btn btn-primary large-button-text",onClick:t[4]||(t[4]=c=>e.handleHomeButtonClick())},"Home")):(r(),a("div",le,[s("button",{type:"button",class:"btn btn-primary large-button-text",onClick:t[3]||(t[3]=c=>e.handleCommentButtonClick(e.postDocumentId))},"Comments"),s("h5",ue,"Comments: "+p(e.post.comments.size),1)]))]),s("div",me,[s("button",{type:"button",class:B(["btn btn-danger large-button-text",{invisible:e.post.authorUid!==((u=e.mainStore.user)==null?void 0:u.uid)}]),onClick:t[5]||(t[5]=c=>e.deletePost(e.postDocumentId))},"Delete",2)])])])])}const he=S(Y,[["render",ce],["__scopeId","data-v-5f9962bd"]]),pe={};const ge=e=>(T("data-v-4a049511"),e=e(),E(),e),fe={class:"loadingio-spinner-spinner-m5iv7qugl48"},ke=ge(()=>s("div",{class:"ldio-xeekklwuj1c"},[s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div")],-1)),be=[ke];function ye(e,t,n,o,l,i){return r(),a("div",fe,be)}const Ce=S(pe,[["render",ye],["__scopeId","data-v-4a049511"]]),Se=M({data(){return{mainStore:_(),content:"",maxContentLength:1e3,sendingData:!1}},methods:{async handleCommentButtonClick(){var t;this.sendingData=!0;const e={postDocumentId:this.$route.params.documentId,commenterUid:(t=this.mainStore.user)==null?void 0:t.uid,commenterUsername:this.mainStore.username,content:H.sanitize(this.content).toString(),createdAt:O()};await V(b(this.mainStore.firestore,"comments"),e),this.content="",this.sendingData=!1}},computed:{trimmedContent(){return this.content.trim()},isCommentTooLong(){return this.trimmedContent.length>this.maxContentLength},isPostTooShort(){return this.trimmedContent.length===0}}});const De={class:"text-center mb-2"},Pe={key:0,class:"redText"},Ue=["disabled"];function ve(e,t,n,o,l,i){return r(),a("div",De,[s("form",{onSubmit:t[2]||(t[2]=F(d=>e.handleCommentButtonClick(),["prevent"])),class:"d-flex flex-column mx-5"},[U(s("textarea",{type:"text",class:"mb-2",rows:"3",placeholder:"Enter content (CTRL + Enter for Submit Shortcut)","onUpdate:modelValue":t[0]||(t[0]=d=>e.content=d),onKeyup:t[1]||(t[1]=G(F(d=>e.handleCommentButtonClick(),["ctrl"]),["enter"]))},null,544),[[w,e.content]]),s("h3",{class:B({redText:e.isCommentTooLong})},"Characters: "+p(e.trimmedContent.length)+" / "+p(e.maxContentLength),3),e.isCommentTooLong?(r(),a("h3",Pe,"Comment content must be less than "+p(e.maxContentLength)+" characters",1)):h("",!0),s("button",{type:"submit",class:"btn btn-primary mt-2 large-button-text",disabled:e.isCommentTooLong||e.isPostTooShort||e.sendingData},"Comment",8,Ue)],32)])}const _e=S(Se,[["render",ve],["__scopeId","data-v-945f0694"]]),$e={props:{comment:{type:Object,required:!0},postDocumentId:{type:String,required:!0},commentDocumentId:{type:String,required:!0},includePostDocumentLink:{type:Boolean,required:!0}},data(){return{mainStore:_()}},methods:{handleDeleteCommentButtonClick(){this.$emit("deleteComment",this.commentDocumentId)},handleGoToPostButtonClick(){this.$router.push({name:"singlePost",params:{documentId:this.postDocumentId}})},getFormattedDate(e){try{return new I(e.seconds,e.nanoseconds).toDate().toLocaleString(void 0,{dateStyle:"long",timeStyle:"short"})}catch{return""}},splitContent(e){return e.split(/( +|\t+|\r?\n+|#\w+)/).filter(Boolean)},wordIsTag(e){return e.startsWith("#")},wordIsMention(e){return e.startsWith("@")}},emits:["deleteComment"]};const we={class:"comment bg-dark"},Ie={class:"d-flex justify-content-between"},Ae={class:"text-center"},Be={class:"text-center text-white-50"},Fe={key:0,class:"d-flex justify-content-center"},Me={key:1,class:"d-flex justify-content-center mt-2"};function Le(e,t,n,o,l,i){var d;return r(),a("div",we,[s("div",Ie,[s("h3",Ae,p(n.comment.commenterUsername),1),s("h5",Be,p(i.getFormattedDate(n.comment.createdAt)),1)]),s("h4",null,[(r(!0),a(y,null,P(i.splitContent(n.comment.content),u=>(r(),a("span",{class:B({tag:i.wordIsTag(u),mention:i.wordIsMention(u)})},p(u),3))),256))]),((d=l.mainStore.user)==null?void 0:d.uid)===n.comment.commenterUid?(r(),a("div",Fe,[s("button",{type:"button",class:"btn btn-danger large-button-text",onClick:t[0]||(t[0]=u=>i.handleDeleteCommentButtonClick())},"Delete")])):h("",!0),n.includePostDocumentLink?(r(),a("div",Me,[s("button",{type:"button",class:"btn btn-success large-button-text",onClick:t[1]||(t[1]=u=>i.handleGoToPostButtonClick())},"Go to Post")])):h("",!0)])}const Te=S($e,[["render",Le],["__scopeId","data-v-952abafa"]]),Ee={props:{userPostDocumentIds:{type:Object,required:!0},userCommentDocumentIds:{type:Object,required:!0}},data(){return{mainStore:_(),username:"",warningMessage:"Username must not contain spaces and must be between 1-15 characters long",userProfilesSnapshot:null,userProfilesUnsubscribe:null,sendingData:!1}},mounted(){this.userProfilesUnsubscribe=v(b(this.mainStore.firestore,"userProfiles"),e=>{this.userProfilesSnapshot=e})},unmounted(){this.userProfilesUnsubscribe&&this.userProfilesUnsubscribe()},methods:{async handleChangeUsernameButtonClick(){this.sendingData=!0,await this.mainStore.setUsername(H.sanitize(this.username),!0,this.userPostDocumentIds,[...this.userCommentDocumentIds]),this.username="",this.sendingData=!1}},computed:{isValidUsername(){return!this.usernameAlreadyExists&&this.username.length>=1&&this.username.length<=15&&!this.username.includes(" ")},existingUsernames(){var t;const e=new Set;return(t=this.userProfilesSnapshot)==null||t.forEach(n=>{const o=n.data();e.add(o.username)}),e},usernameAlreadyExists(){return this.existingUsernames.has(this.username)}}};const qe=e=>(T("data-v-67e2b44d"),e=e(),E(),e),je={class:"d-flex flex-column align-items-center"},ze=qe(()=>s("h1",null,"Change Username",-1)),Oe={key:0,class:"text-danger text-center"},Ve=["disabled"];function He(e,t,n,o,l,i){return r(),a("div",je,[ze,s("form",{onSubmit:t[2]||(t[2]=F(()=>{},["prevent"]))},[U(s("input",{type:"text",class:"text-center w-100",placeholder:"Enter username","onUpdate:modelValue":t[0]||(t[0]=d=>l.username=d)},null,512),[[w,l.username]]),!i.isValidUsername&&l.username.length>0?(r(),a("h3",Oe,p(i.usernameAlreadyExists?"Username already exists":l.warningMessage),1)):h("",!0),s("button",{type:"submit",class:"btn btn-primary mt-2 large-button-text d-block w-100",disabled:!i.isValidUsername||l.sendingData,onClick:t[1]||(t[1]=d=>i.handleChangeUsernameButtonClick())},"Change",8,Ve)],32)])}const Ne=S(Ee,[["render",He],["__scopeId","data-v-67e2b44d"]]),Qe={data(){return{mainStore:_(),userProfileSnapshot:null,userProfileUnsubscribe:null}},mounted(){var e;this.userProfileUnsubscribe=v(g(this.mainStore.firestore,"userProfiles",(e=this.mainStore.user)==null?void 0:e.uid),t=>{this.userProfileSnapshot=t})},unmounted(){this.userProfileUnsubscribe&&this.userProfileUnsubscribe()},computed:{accountCreationDate(){var e;try{const{createdAt:t}=(e=this.userProfileSnapshot)==null?void 0:e.data();return new I(t.seconds,t.nanoseconds).toDate().toLocaleString(void 0,{dateStyle:"medium"})}catch{}return""}}},We=s("h1",{class:"text-center"},"Account Created",-1),Ge={class:"text-center text-white-50"};function Ke(e,t,n,o,l,i){return r(),a(y,null,[We,s("h2",Ge,p(i.accountCreationDate),1)],64)}const Re=S(Qe,[["render",Ke]]),Je=M({methods:{closeModal(){this.$emit("closeModal")},deleteAccount(){this.$emit("deleteAccount")}},emits:["closeModal","deleteAccount"]});const Xe=e=>(T("data-v-e0ca92eb"),e=e(),E(),e),Ye={class:"modal-custom bg-dark"},Ze=Xe(()=>s("h1",{class:"text-center"},"Deleting account will also result in all posts, comments, likes, tags, and mentions being deleted. Are you sure you want to continue?",-1)),xe={class:"d-flex justify-content-around"};function et(e,t,n,o,l,i){return r(),a("div",{class:"modal-backdrop",onClick:t[2]||(t[2]=F(d=>e.closeModal(),["self"]))},[s("div",Ye,[Ze,s("div",xe,[s("button",{type:"button",class:"btn btn-secondary w-100 large-button-text me-4",onClick:t[0]||(t[0]=d=>e.closeModal())},"Cancel"),s("button",{type:"button",class:"btn btn-danger w-100 large-button-text",onClick:t[1]||(t[1]=d=>e.deleteAccount())},"Delete")])])])}const tt=S(Je,[["render",et],["__scopeId","data-v-e0ca92eb"]]),st=M({props:{isPersonalPage:{type:Boolean,required:!0},isDetailsPage:{type:Boolean,required:!0},isProfilePage:{type:Boolean,required:!0}},data(){return{mainStore:_(),postsSnapshot:null,tagsSnapshot:null,likesSnapshot:null,commentsSnapshot:null,mentionsSnapshot:null,postsUnsubscribe:null,likesUnsubscribe:null,commentsUnsubscribe:null,mentionsUnsubscribe:null,authorUsernameSearchString:"",contentSearchString:"",tagSearchString:"",sortPostsByNumLikes:!1,accountCreationDate:"",auth:K(),showDeleteAccountModal:!1}},methods:{async deletePostFromFirestore(e){var n,o,l;const t=[];for(const[i]of(n=this.posts.get(e))==null?void 0:n.tags)t.push(k(g(this.mainStore.firestore,"tags",i)));for(const[i]of(o=this.posts.get(e))==null?void 0:o.likes)t.push(k(g(this.mainStore.firestore,"likes",i)));for(const[i]of(l=this.posts.get(e))==null?void 0:l.comments)t.push(k(g(this.mainStore.firestore,"comments",i)));for(const[i,d]of this.mentions)d.postDocumentId===e&&t.push(k(g(this.mainStore.firestore,"mentions",i)));t.push(k(g(this.mainStore.firestore,"posts",e))),await Promise.all(t),this.$route.name==="singlePost"&&this.$router.push({name:"posts"})},async deleteAccountFromFirestore(){var t,n;let e=[];this.postDocumentIdsByAuthorUid.forEach(async o=>{e.push(this.deletePostFromFirestore(o))}),await Promise.all(e),e=[];for(const o of this.getCommentsByUserId.keys())e.push(k(g(this.mainStore.firestore,"comments",o)));(t=this.likesSnapshot)==null||t.forEach(o=>{var i;o.data().likerUid===((i=this.mainStore.user)==null?void 0:i.uid)&&e.push(k(g(this.mainStore.firestore,"likes",o.id)))}),await Promise.all(e),await k(g(this.mainStore.firestore,"userProfiles",(n=this.mainStore.user)==null?void 0:n.uid)),this.showDeleteAccountModal=!1,this.handleSignOutButtonClick()},clearFilters(){this.authorUsernameSearchString="",this.contentSearchString="",this.tagSearchString="",this.sortPostsByNumLikes=!1},updateAuthorUsername(e){this.authorUsernameSearchString=e},updateTag(e){this.tagSearchString=e},likePostFromFirestore(e){var n;const t={postDocumentId:e,likerUid:(n=this.mainStore.user)==null?void 0:n.uid,createdAt:O()};V(b(this.mainStore.firestore,"likes"),t)},unlikePostFromFirestore(e){k(g(this.mainStore.firestore,"likes",e))},postsSortedDescendingByLikes(e,t){if(!t)return e;const n=Array.from(e);return n.sort(([,l],[,i])=>i.likes.size-l.likes.size),new Map(n)},async getTagsForPost(e){const t=[],n=A(b(this.mainStore.firestore,"tags"),R("postDocumentId","==",e));return(await j(n)).forEach(l=>{t.push(l.data())}),t},postTagsContainSearchString(e,t){let n=!1;for(const[,o]of e)if(o.tag.toLowerCase().includes(t.toLowerCase())){n=!0;break}return n},deleteCommentFromFirestore(e){k(g(this.mainStore.firestore,"comments",e))},handleSignOutButtonClick(){J(this.auth)},serverTimestampToTimestamp(e){try{return new I(e.seconds,e.nanoseconds)}catch{return new I(0,0)}},toggleDeleteAccountModal(){this.showDeleteAccountModal=!this.showDeleteAccountModal}},components:{Post:he,Spinner:Ce,CreateComment:_e,Comment:Te,ChangeUsername:Ne,AccountCreationDate:Re,DeleteAccountModal:tt},mounted(){const e=A(b(this.mainStore.firestore,"posts"),L("createdAt","desc"));this.postsUnsubscribe=v(e,async o=>{this.postsSnapshot=o;const l=await j(b(this.mainStore.firestore,"tags"));this.tagsSnapshot=l}),this.likesUnsubscribe=v(b(this.mainStore.firestore,"likes"),o=>{this.likesSnapshot=o});const t=A(b(this.mainStore.firestore,"comments"),L("createdAt","desc"));this.commentsUnsubscribe=v(t,o=>{this.commentsSnapshot=o});const n=A(b(this.mainStore.firestore,"mentions"),L("createdAt","desc"));this.mentionsUnsubscribe=v(n,o=>{this.mentionsSnapshot=o})},unmounted(){this.postsUnsubscribe&&this.postsUnsubscribe(),this.likesUnsubscribe&&this.likesUnsubscribe(),this.commentsUnsubscribe&&this.commentsUnsubscribe(),this.mentionsUnsubscribe&&this.mentionsUnsubscribe()},computed:{posts(){var t,n,o,l;const e=new Map;return(t=this.postsSnapshot)==null||t.forEach(i=>{const d=i.data(),u=new Map,c=new Map,$=new Map;e.set(i.id,{...d,tags:u,likes:c,comments:$})}),(n=this.tagsSnapshot)==null||n.forEach(i=>{var u;const d=i.data();(u=e.get(d.postDocumentId))==null||u.tags.set(i.id,d)}),(o=this.likesSnapshot)==null||o.forEach(i=>{var u;const d=i.data();(u=e.get(d.postDocumentId))==null||u.likes.set(i.id,d)}),(l=this.commentsSnapshot)==null||l.forEach(i=>{var u;const d=i.data();(u=e.get(d.postDocumentId))==null||u.comments.set(i.id,d)}),e},postsFilteredByDocIdAndAuthorUidAndAuthorUsernameAndContentAndTag(){var t;const e=new Map;for(const[n,o]of this.posts){const l=n===this.documentIdForDetailsPage,i=o.authorUid===((t=this.mainStore.user)==null?void 0:t.uid),d=o.authorUsername.toLowerCase().includes(this.authorUsernameSearchString.toLowerCase()),u=o.content.toLowerCase().includes(this.contentSearchString.toLowerCase()),c=this.tagSearchString.length>0?this.postTagsContainSearchString(o.tags,this.tagSearchString):!0;(this.isDetailsPage&&l||this.isPersonalPage&&i&&u&&c||!this.isDetailsPage&&!this.isPersonalPage&&d&&u&&c)&&e.set(n,o)}return e},documentIdForDetailsPage(){return this.$route.params.documentId},getCommentsFromPostDocumentId(){var e;return this.isDetailsPage==!0?(e=this.posts.get(this.documentIdForDetailsPage))==null?void 0:e.comments:new Map},getCommentsByUserId(){var t;const e=new Map;return(t=this.commentsSnapshot)==null||t.forEach(n=>{var l;const o=n.data();o.commenterUid===((l=this.mainStore.user)==null?void 0:l.uid)&&e.set(n.id,o)}),e},mentions(){var t;const e=new Map;return(t=this.mentionsSnapshot)==null||t.forEach(n=>{const o=n.data();e.set(n.id,o)}),e},mentionsByMentionedUid(){var t;const e=new Map;for(const[,n]of this.mentions)n.mentionedUid===((t=this.mainStore.user)==null?void 0:t.uid)&&e.set(n.postDocumentId,n);return e},postDocumentIdsByAuthorUid(){var t;const e=[];for(const[n,o]of this.posts)o.authorUid===((t=this.mainStore.user)==null?void 0:t.uid)&&e.push(n);return e},postsByMentionedUid(){const e=new Map;for(const[t,n]of this.posts)this.mentionsByMentionedUid.has(t)&&e.set(t,n);return e},newPostsByMentionedUid(){const e=new Map;for(const[t,n]of this.postsByMentionedUid)this.serverTimestampToTimestamp(n.createdAt).toDate()>this.mainStore.userLastLogin&&e.set(t,n);return e},oldPostsByMentionedUid(){const e=new Map;for(const[t,n]of this.postsByMentionedUid)this.serverTimestampToTimestamp(n.createdAt).toDate()<this.mainStore.userLastLogin&&e.set(t,n);return e}}});const nt={key:0},ot={class:"text-center"},it={key:0},rt={key:1},at={key:2,class:"filters"},dt=s("h3",null,"Filter by Author",-1),lt=s("h3",null,"Filter by Content",-1),ut=s("h3",null,"Filter by Tag",-1),mt=s("h3",null,"Sort by Likes",-1),ct={key:0,class:"d-flex justify-content-center"},ht={key:1},pt={key:2},gt=s("h1",{class:"text-center"},"My Comments",-1),ft={key:1},kt={key:0},bt=s("h1",{class:"text-center"},"My Mentions",-1),yt={key:0},Ct=s("h2",{class:"ms-3"},"New",-1),St={key:1},Dt=s("h2",{class:"ms-3"},"Old",-1),Pt={class:"d-flex flex-column align-items-center"};function Ut(e,t,n,o,l,i){var q;const d=D("Spinner"),u=D("Post"),c=D("CreateComment"),$=D("Comment"),N=D("ChangeUsername"),Q=D("AccountCreationDate"),W=D("DeleteAccountModal");return e.isProfilePage?(r(),a("div",ft,[C(N,{userPostDocumentIds:e.postDocumentIdsByAuthorUid,userCommentDocumentIds:e.getCommentsByUserId.keys()},null,8,["userPostDocumentIds","userCommentDocumentIds"]),e.postsByMentionedUid.size>0?(r(),a("div",kt,[bt,e.newPostsByMentionedUid.size>0?(r(),a("div",yt,[Ct,(r(!0),a(y,null,P(e.newPostsByMentionedUid,([m,f])=>(r(),a("div",null,[C(u,{post:f,postDocumentId:m,showHomeButton:!!e.documentIdForDetailsPage,onAuthorUsernameClicked:e.updateAuthorUsername,onTagClicked:e.updateTag,onDeletePost:e.deletePostFromFirestore,onPostLiked:e.likePostFromFirestore,onPostUnliked:e.unlikePostFromFirestore},null,8,["post","postDocumentId","showHomeButton","onAuthorUsernameClicked","onTagClicked","onDeletePost","onPostLiked","onPostUnliked"])]))),256))])):h("",!0),e.oldPostsByMentionedUid.size>0?(r(),a("div",St,[Dt,(r(!0),a(y,null,P(e.oldPostsByMentionedUid,([m,f])=>(r(),a("div",null,[C(u,{post:f,postDocumentId:m,showHomeButton:!!e.documentIdForDetailsPage,onAuthorUsernameClicked:e.updateAuthorUsername,onTagClicked:e.updateTag,onDeletePost:e.deletePostFromFirestore,onPostLiked:e.likePostFromFirestore,onPostUnliked:e.unlikePostFromFirestore},null,8,["post","postDocumentId","showHomeButton","onAuthorUsernameClicked","onTagClicked","onDeletePost","onPostLiked","onPostUnliked"])]))),256))])):h("",!0)])):h("",!0),C(Q),s("div",Pt,[s("button",{type:"button",class:"btn btn-secondary large-button-text w-100",onClick:t[5]||(t[5]=m=>e.handleSignOutButtonClick())},"Sign Out"),s("button",{type:"button",class:"btn btn-danger large-button-text w-100 mt-2",onClick:t[6]||(t[6]=m=>e.toggleDeleteAccountModal())},"Delete Account")]),e.showDeleteAccountModal?(r(),z(W,{key:1,onCloseModal:t[7]||(t[7]=m=>e.toggleDeleteAccountModal()),onDeleteAccount:t[8]||(t[8]=m=>e.deleteAccountFromFirestore())})):h("",!0)])):(r(),a("div",nt,[s("div",ot,[!e.isPersonalPage&&!e.isDetailsPage?(r(),a("h1",it,"Posts")):h("",!0),e.isPersonalPage&&!e.isDetailsPage?(r(),a("h1",rt,"My Posts")):h("",!0),e.isDetailsPage?h("",!0):(r(),a("div",at,[e.isPersonalPage?h("",!0):(r(),a(y,{key:0},[dt,U(s("input",{type:"text",placeholder:"Author","onUpdate:modelValue":t[0]||(t[0]=m=>e.authorUsernameSearchString=m)},null,512),[[w,e.authorUsernameSearchString]])],64)),lt,U(s("input",{type:"text",placeholder:"Content","onUpdate:modelValue":t[1]||(t[1]=m=>e.contentSearchString=m)},null,512),[[w,e.contentSearchString]]),ut,U(s("input",{type:"text",placeholder:"Tag","onUpdate:modelValue":t[2]||(t[2]=m=>e.tagSearchString=m)},null,512),[[w,e.tagSearchString]]),mt,U(s("input",{type:"checkbox",class:"checkbox",placeholder:"false","onUpdate:modelValue":t[3]||(t[3]=m=>e.sortPostsByNumLikes=m)},null,512),[[X,e.sortPostsByNumLikes]]),s("button",{type:"button",class:"btn btn-secondary d-block mx-auto mt-2 large-button-text",onClick:t[4]||(t[4]=m=>e.clearFilters())},"Clear Filters")]))]),e.posts.size===0?(r(),a("div",ct,[C(d)])):h("",!0),(r(!0),a(y,null,P(e.postsSortedDescendingByLikes(e.postsFilteredByDocIdAndAuthorUidAndAuthorUsernameAndContentAndTag,e.sortPostsByNumLikes),([m,f])=>(r(),a("div",null,[C(u,{post:f,postDocumentId:m,showHomeButton:!!e.documentIdForDetailsPage,onAuthorUsernameClicked:e.updateAuthorUsername,onTagClicked:e.updateTag,onDeletePost:e.deletePostFromFirestore,onPostLiked:e.likePostFromFirestore,onPostUnliked:e.unlikePostFromFirestore},null,8,["post","postDocumentId","showHomeButton","onAuthorUsernameClicked","onTagClicked","onDeletePost","onPostLiked","onPostUnliked"])]))),256)),e.isDetailsPage?(r(),a("div",ht,[e.mainStore.user!=null?(r(),z(c,{key:0})):h("",!0),(r(!0),a(y,null,P((q=e.posts.get(e.documentIdForDetailsPage))==null?void 0:q.comments,([m,f])=>(r(),a("div",null,[C($,{comment:f,postDocumentId:e.documentIdForDetailsPage,commentDocumentId:m,includePostDocumentLink:!1,onDeleteComment:e.deleteCommentFromFirestore},null,8,["comment","postDocumentId","commentDocumentId","onDeleteComment"])]))),256))])):h("",!0),e.isPersonalPage&&e.getCommentsByUserId.size>0?(r(),a("div",pt,[gt,(r(!0),a(y,null,P(e.getCommentsByUserId,([m,f])=>(r(),a("div",null,[C($,{comment:f,postDocumentId:f.postDocumentId,commentDocumentId:m,includePostDocumentLink:!0,onDeleteComment:e.deleteCommentFromFirestore},null,8,["comment","postDocumentId","commentDocumentId","onDeleteComment"])]))),256))])):h("",!0)]))}const $t=S(st,[["render",Ut]]);export{$t as default};
